---
title: "Campaigns"
sidebarTitle: "Campaigns"
description: "Run automated calling campaigns at scale."
---

Campaigns let you dial a list of contacts automatically. Create a campaign, link it to an audience (contact list), and start dialing.

## Campaign Lifecycle

```
Create → Start → Running → Pause/Complete → Delete
           ↓
    (or Schedule)
```

## Prerequisites

Before creating a campaign, you need:

1. **Agent** — Created via SDK or Dashboard
2. **Audience** — Contact list with phone numbers
3. **Phone Number ID** — From `get_phone_numbers()`

<Tip>
  Get your phone number ID using `client.get_phone_numbers()` — the `_id` field is what you pass to campaigns.
</Tip>

## Quick Start

```python
from smallestai.atoms import AtomsClient
from smallestai.atoms.audience import Audience
from smallestai.atoms.campaign import Campaign

client = AtomsClient()
audience = Audience()
campaign = Campaign()

# 1. Get phone number
phones = client.get_phone_numbers()
phone_id = phones["data"][0]["_id"]

# 2. Create agent
agent = client.new_agent(
    name="Campaign Agent",
    prompt="You are a friendly assistant.",
    description="Agent for outreach"
)
agent_id = agent.data

# 3. Create audience
aud = audience.create(
    name="My Contacts",
    phone_numbers=["+916366821717", "+919353662554"],
    names=[("John", "Doe"), ("Jane", "Smith")]
)
audience_id = aud["data"]["_id"]

# 4. Create campaign
camp = campaign.create(
    name="Outreach Campaign",
    agent_id=agent_id,
    audience_id=audience_id,
    phone_ids=[phone_id],
    description="Follow-up calls",
    max_retries=2,
    retry_delay=15
)
campaign_id = camp["data"]["_id"]

# 5. Start campaign
campaign.start(campaign_id)
print(f"Campaign started: {campaign_id}")
```

## Creating an Audience

```python
from smallestai.atoms.audience import Audience

audience = Audience()

# Create with phone numbers and names
result = audience.create(
    name="January Leads",
    phone_numbers=["+916366821717", "+919353662554"],
    names=[("John", "Doe"), ("Jane", "Smith")]
)

audience_id = result["data"]["_id"]
print(f"Created audience: {audience_id}")
```

### Adding Contacts Later

```python
# Add more contacts to existing audience
audience.add_contacts(
    audience_id=audience_id,
    phone_numbers=["+919876543210"],
    names=[("New", "User")]
)
```

## Creating a Campaign

```python
from smallestai.atoms.campaign import Campaign

campaign = Campaign()

result = campaign.create(
    name="Follow-up Campaign",
    agent_id="your-agent-id",
    audience_id="your-audience-id",
    phone_ids=["your-phone-id"],
    description="Following up with leads",
    max_retries=3,
    retry_delay=15
)

campaign_id = result["data"]["_id"]
```

### Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `name` | string | Yes | Campaign name |
| `agent_id` | string | Yes | Agent ID |
| `audience_id` | string | Yes | Contact list ID |
| `phone_ids` | list | Yes | Phone number IDs (from `get_phone_numbers()`) |
| `description` | string | No | Campaign description |
| `max_retries` | int | No | Retry unanswered (0-10, default: 3) |
| `retry_delay` | int | No | Minutes between retries (default: 15) |

## Starting a Campaign

```python
campaign.start(campaign_id)
print("Campaign started!")
```

## Monitoring Progress

```python
import time

for i in range(10):
    time.sleep(10)
    
    status = campaign.get(campaign_id)
    campaign_data = status["data"]["campaign"]
    metrics = status["data"]["metrics"]
    
    print(f"Status: {campaign_data['status']}")
    print(f"Called: {metrics['contacts_called']}/{metrics['total_participants']}")
    
    if campaign_data["status"] in ["completed", "failed"]:
        break
```

## Stopping a Running Campaign

```python
# Only works for running campaigns
status = campaign.get(campaign_id)
if status["data"]["campaign"]["status"] in ["running", "active"]:
    campaign.stop(campaign_id)
    print("Campaign stopped")
else:
    print("Campaign already completed")
```

## Listing Campaigns

```python
campaigns = campaign.list()

for c in campaigns["data"]["campaigns"]:
    print(f"{c['name']}: {c['status']}")
```

## Deleting a Campaign

```python
campaign.delete(campaign_id)
```

## Complete Example

```python
import time
from smallestai.atoms import AtomsClient
from smallestai.atoms.audience import Audience
from smallestai.atoms.campaign import Campaign

client = AtomsClient()
audience = Audience()
campaign = Campaign()

# 1. Get phone number
phones = client.get_phone_numbers()
phone_id = phones["data"][0]["_id"]
print(f"Using phone: {phones['data'][0]['attributes']['phoneNumber']}")

# 2. Create agent
agent = client.new_agent(
    name=f"Campaign Agent {int(time.time())}",
    prompt="You are a friendly survey agent. Ask about interest and get their name.",
    description="Test agent"
)
agent_id = agent.data
print(f"Agent: {agent_id}")

# 3. Create audience
aud = audience.create(
    name=f"Test Audience {int(time.time())}",
    phone_numbers=["+916366821717"],
    names=[("Test", "User")]
)
audience_id = aud["data"]["_id"]
print(f"Audience: {audience_id}")

# 4. Create campaign
camp = campaign.create(
    name=f"Test Campaign {int(time.time())}",
    agent_id=agent_id,
    audience_id=audience_id,
    phone_ids=[phone_id],
    max_retries=1,
    retry_delay=5
)
campaign_id = camp["data"]["_id"]
print(f"Campaign: {campaign_id}")

# 5. Start
campaign.start(campaign_id)
print("Campaign started!")

# 6. Monitor
for i in range(6):
    time.sleep(10)
    status = campaign.get(campaign_id)
    print(f"Status: {status['data']['campaign']['status']}")
    if status['data']['campaign']['status'] in ['completed', 'failed']:
        break

# 7. Cleanup
campaign.delete(campaign_id)
audience.delete(audience_id)
client.delete_agent(id=agent_id)
print("Cleanup complete")
```

## Campaign States

| State | Description |
|-------|-------------|
| `draft` | Created, not started |
| `scheduled` | Waiting for scheduled time |
| `running` | Making calls |
| `paused` | Paused (can resume) |
| `completed` | All contacts called |
| `failed` | Error (e.g., no phone configured) |

## Troubleshooting

| Error | Solution |
|-------|----------|
| "No phone numbers available" | Pass `phone_ids` from `get_phone_numbers()` |
| Campaign stays "draft" | Call `campaign.start(campaign_id)` |
| Campaign fails immediately | Verify agent and audience IDs are valid |

## Best Practices

<AccordionGroup>
  <Accordion title="Test with small audience">
    Start with 1-2 contacts to verify before scaling.
  </Accordion>
  <Accordion title="Use reasonable retry settings">
    2-3 retries with 15-30 minute delays balances persistence and respect.
  </Accordion>
  <Accordion title="Check campaign status">
    Monitor with `campaign.get()` and stop if needed.
  </Accordion>
</AccordionGroup>
